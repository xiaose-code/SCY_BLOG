---
title:  jså­¦ä¹ 
date: 2023-07-06 08:46:25
permalink: /pages/51542d/
---
# JavaScript å­¦ä¹ å°ç»“

## ä»€ä¹ˆæ˜¯ ES6 ï¼Ÿ

æ ¹æ®ç»´åŸºç™¾ç§‘è§£é‡Š ECMAScript è§„èŒƒæ˜¯ç”± Netscape çš„ Brendan Eich å¼€å‘çš„è„šæœ¬è¯­è¨€çš„**æ ‡å‡†åŒ–è§„èŒƒ**ã€‚

æœ€åˆå‘½åä¸º Mochaï¼Œç„¶åæ˜¯ LiveScriptï¼Œæœ€åæ˜¯ JavaScriptã€‚

>ECMAScript æ˜¯è§„èŒƒï¼ŒJavaScript æ˜¯å…¶çš„ä¸€ç§å®ç°

ECMAScript 2015 (ES2015) æ˜¯ç¬¬ 6 ç‰ˆï¼Œæœ€åˆç§°ä¸º ECMAScript 6 (ES6)ï¼Œå®ƒæ·»åŠ äº†è®¸å¤šæ–°åŠŸèƒ½ï¼Œè¿™äº›æ–°åŠŸèƒ½åæ¥æˆä¸º Web å¼€å‘äººå‘˜å·¥å…·åŒ…çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚

## 1ã€å˜é‡ä¸æ•°æ®ç±»å‹

### å£°æ˜å˜é‡ï¼ˆä½œç”¨åŸŸï¼‰

#### 1) let :star:

```js
let å˜é‡å = å€¼;
```

* let å£°æ˜çš„å˜é‡å¯ä»¥è¢«**å¤šæ¬¡èµ‹å€¼**ï¼Œä¾‹å¦‚

```js
let a = 100;  // åˆå§‹å€¼æ˜¯ 100
a = 200;	  // ok, è¢«é‡æ–°èµ‹å€¼ä¸º 200
```

#### 2) const :star:

* const ä¿®é¥°çš„å«**å¸¸é‡**ï¼Œåªèƒ½èµ‹å€¼ä¸€æ¬¡

```js
const b = 300; // åˆå§‹å€¼æ˜¯ 300
b = 400;	   // error, ä¸èƒ½å†æ¬¡èµ‹å€¼
```

* **const å¹¶ä¸æ„å‘³ç€å®ƒå¼•ç”¨çš„å†…å®¹ä¸å¯ä¿®æ”¹**ï¼Œä¾‹å¦‚

```js
const c = [1,2,3];
c[2] = 4; 	        // ok, æ•°ç»„å†…å®¹è¢«ä¿®æ”¹æˆ [1,2,4]
c = [5,6];			// error, ä¸èƒ½å†æ¬¡èµ‹å€¼
```

> æ€»ç»“ï¼š`const` ä¿®é¥°çš„å˜é‡ï¼Œåªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡ä½†å†…å®¹å¯ä»¥ä¿®æ”¹

#### 3) var

var å£°æ˜çš„å˜é‡å¯ä»¥è¢«å¤šæ¬¡èµ‹å€¼ï¼ˆlet ä¹Ÿæ˜¯ï¼‰ï¼Œä¾‹å¦‚

```js
var f = 100;
f = 200;
```

#### let å’Œ var çš„åŒºåˆ«ï¼Ÿ

ä½œç”¨åŸŸï¼ˆå³èŒƒå›´ï¼‰ä¸åŒã€‚

é¦–å…ˆï¼Œä»€ä¹ˆæ˜¯èŒƒå›´ï¼Ÿ

èŒƒå›´æ˜¯æŒ‡ï¼šæ¥è‡ªæˆ‘ä»¬ç¨‹åºä¸åŒéƒ¨åˆ†çš„å˜é‡çš„å¯è®¿é—®æ€§ã€‚

- ä½¿ç”¨ var å£°æ˜æ—¶ï¼ŒJavaScript å˜é‡å…·æœ‰**å…¨å±€èŒƒå›´å’Œå‡½æ•°èŒƒå›´**ã€‚
- å½“ä½¿ç”¨ let å£°æ˜å˜é‡æ—¶ï¼ŒES6 ä¸º JavaScript å¸¦æ¥äº†**å—çº§èŒƒå›´**ã€‚

```js
{
    var a = "ğŸ‰";
    let b = "â›³";
}
console.log(a);
console.log(b);
Uncaught ReferenceError: b is not defined // b æ²¡æœ‰å®šä¹‰
```

å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬ä½¿ç”¨ `var` å…³é”®å­—åœ¨ block ä¸­å®šä¹‰äº†å˜é‡ â€œaâ€ï¼Œå¯ä»¥å…¨å±€è®¿é—®ã€‚æ‰€ä»¥ var å£°æ˜çš„å˜é‡æ˜¯å…¨å±€çš„ã€‚

ä½†æ˜¯ï¼Œæˆ‘ä»¬å¸Œæœ›å˜é‡åœ¨ block ä¸­ç”Ÿæ•ˆï¼Œé€€å‡º block æ—¶ä¸å¯è®¿é—®ã€‚ç„¶åï¼Œå¯ä»¥ä½¿ç”¨ ES6 æ–°çš„å—çº§ä½œç”¨åŸŸå…³é”®å­— `let` æ¥å£°æ˜å˜é‡ï¼Œå°±åƒè¿™é‡Œçš„å˜é‡ b ä¸€æ ·ï¼Œä¼šæŠ¥é”™è¯´ b æ²¡æœ‰å®šä¹‰ã€‚

### åŸºæœ¬ç±»å‹

#### 1,2) undefined å’Œ null

1. æ‰§è¡Œè¡¨è¾¾å¼æˆ–å‡½æ•°ï¼Œ**æ²¡æœ‰è¿”å›ç»“æœ**ï¼Œå‡ºç° undefined
2. è®¿é—®æ•°ç»„ä¸å­˜åœ¨çš„å…ƒç´ ï¼Œ**è®¿é—®å¯¹è±¡ä¸å­˜åœ¨çš„å±æ€§**ï¼Œå‡ºç° undefined
3. å®šä¹‰å˜é‡ï¼Œ**æ²¡æœ‰åˆå§‹åŒ–**ï¼Œå‡ºç° undefined

ä¾‹å¦‚ï¼š

```js
console.log(1);  	// å‡½æ•°æ²¡æœ‰è¿”å›å€¼, ç»“æœæ˜¯  undefined

let a = 10;		 	// è¡¨è¾¾å¼æ²¡æœ‰è¿”å›å€¼, ç»“æœæ˜¯ undefined

let b = [1,2,3];
console.log(b[10]); // æ•°ç»„æœªå®šä¹‰å…ƒç´ ï¼Œç»“æœæ˜¯ undefined

let c = {"name":"å¼ ä¸‰"};
console.log(c.age); // å¯¹è±¡æœªå®šä¹‰å±æ€§ï¼Œç»“æœæ˜¯ undefined

let d;
console.log(d);		// å˜é‡æœªåˆå§‹åŒ–ï¼Œç»“æœæ˜¯ undefined
```

äºŒè€…**å…±åŒç‚¹**ï¼š

* éƒ½æ²¡æœ‰å±æ€§ã€æ–¹æ³•
* äºŒè€…åˆç§° Nullish

äºŒè€…**åŒºåˆ«**ï¼š

* undefined ç”± js äº§ç”Ÿ
* null ç”±ç¨‹åºå‘˜æä¾›

#### 3) string :star:

`js å­—ç¬¦ä¸²`æœ‰ä»¥ä¸‹ä¸‰ç§å†™æ³•ï¼š

```js
let a = "hello";  // åŒå¼•å·
let b = "world";  // å•å¼•å·
let c = `hello`;  // åå¼•å·
```

> å­—ç¬¦ä¸²å¦‚ä½•è¡¨ç¤ºï¼Ÿ

html ä»£ç å¦‚ä¸‹

```html
<a href="1.html">è¶…é“¾æ¥</a>
```

java æ˜¾å¾—æ¯”è¾ƒç¹ç

```java
String s1 = "<a href=\"1.html\">è¶…é“¾æ¥</a>";

String s2 = """
    <a href="1.html">è¶…é“¾æ¥</a>""";
```

js å°±æ¯”è¾ƒçµæ´»

```js
let s1 = '<a href="1.html">è¶…é“¾æ¥</a>';

let s2 = `<a href="1.html">è¶…é“¾æ¥</a>`;
```

> æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆTemplate stringsï¼‰

éœ€æ±‚ï¼šæ‹¼æ¥ URL çš„è¯·æ±‚å‚æ•°ï¼Œå¦‚

```URL
/test?name=zhang&age=18
/test?name=li&age=20
```

ä¼ ç»Ÿæ–¹æ³•æ‹¼æ¥ï¼Œç”¨ `+` å·æ‹¼æ¥ï¼š

```js
let name = ; // zhang li ...
let age = ; // 18 20 ...

let url = "/test?name=" + name + "&age=" + age;
```

æ¨¡æ¿å­—ç¬¦ä¸²æ–¹å¼ï¼Œç”¨ `${å‚æ•°}`ï¼š

```js
let name = ; // zhang li ...
let age = ; // 18 20 ...

let url = `/test?name=${name}&age=${age}`;
```

#### 4,5) number å’Œ bigint:star:

> number

`number` ç±»å‹æ ‡è¯†çš„æ˜¯**åŒç²¾åº¦æµ®åŠ¨å°æ•°**ï¼Œä¾‹å¦‚

```js
10 / 3;   // ç»“æœ 3.3333333333333335
```

æ—¢ç„¶æ˜¯æµ®ç‚¹å°æ•°ï¼Œé‚£ä¹ˆå¯ä»¥é™¤é›¶

```js
10 / 0;	  // ç»“æœ Infinity æ­£æ— ç©·å¤§
-10 / 0;  // ç»“æœ -Infinity è´Ÿæ— ç©·å¤§
```

æµ®ç‚¹å°æ•°éƒ½æœ‰è¿ç®—ç²¾åº¦é—®é¢˜ï¼Œä¾‹å¦‚

```js
2.0 - 1.1; // ç»“æœ 0.8999999999999999
```

å­—ç¬¦ä¸²è½¬æ•°å­—

```js
parseInt("10"); 	// ç»“æœæ˜¯æ•°å­— 10 
parseInt("10.5");	// ç»“æœæ˜¯æ•°å­— 10, å»é™¤äº†å°æ•°éƒ¨åˆ†

parseInt("10") / 3; // ç»“æœä»è§†ä¸º number æµ®ç‚¹æ•°, å› æ­¤ç»“æœä¸º 3.3333333333333335

parseInt("abc");	// è½¬æ¢å¤±è´¥ï¼Œç»“æœæ˜¯ç‰¹æ®Šå€¼ NaN (Not a Number)
```

> bigint

è¦è¡¨ç¤ºçœŸæ­£çš„æ•´æ•°ï¼Œéœ€è¦ç”¨ `bigint`ã€‚

æ³¨æ„ï¼šæ•°å­—çš„ç»“å°¾ç”¨ `n` è¡¨ç¤ºå®ƒæ˜¯ä¸€ä¸ª `bigint` ç±»å‹ã€‚

```js
10n / 3n;			// ç»“æœ 3n, æŒ‰æ•´æ•°é™¤æ³•å¤„ç†
```

#### 6) boolean :star:

* Truthy
* Falsy

**åœ¨ js ä¸­ï¼Œå¹¶ä¸æ˜¯ boolean æ‰èƒ½ç”¨äºæ¡ä»¶åˆ¤æ–­**ï¼Œä½ å¯ä»¥åœ¨ if è¯­å¥ä¸­ä½¿ç”¨ã€æ•°å­—ã€‘ã€ã€å­—ç¬¦ä¸²ã€‘... ä½œä¸ºåˆ¤æ–­æ¡ä»¶

```js
let b = 1;

if(b) { // true
    console.log("è¿›å…¥äº†");
}
```

è¿™æ—¶å°±æœ‰ä¸€ä¸ªè§„åˆ™ï¼Œå½“éœ€è¦æ¡ä»¶åˆ¤æ–­æ—¶ï¼Œè¿™ä¸ªå€¼è¢«å½“ä½œ true è¿˜æ˜¯ falseã€‚

- å½“ä½œ true çš„å€¼å½’ç±»ä¸º truthyï¼Œ
- å½“ä½œ false çš„å€¼å½’ç±»ä¸º falsy

> ä¸‹é¢å€¼éƒ½æ˜¯ falsy

* `false`
* `Nullish (null, undefined)`
* `0, 0n, NaN`
* ``` "" '' `` ```  å³é•¿åº¦ä¸ºé›¶çš„å­—ç¬¦ä¸²

> å‰©ä½™çš„å€¼ç»å¤§éƒ¨åˆ†éƒ½æ˜¯ truthy

æœ‰å‡ ä¸ªå®¹æ˜“è¢«å½“ä½œ falsy å®é™…æ˜¯ truthy çš„

* `"false", "0"` (æ³¨æ„åŒå¼•å·ï¼‰å³å­—ç¬¦ä¸²çš„ false å’Œ å­—ç¬¦ä¸²çš„é›¶
* `[]` ç©ºæ•°ç»„
* `{}` ç©ºå¯¹è±¡

#### 7) symbol

ç”¨äºè¡¨ç¤ºå”¯ä¸€çš„æ ‡è¯†ç¬¦ã€‚

```js
const mySymbol = Symbol('description');
```

* å¾ˆå°‘ä½¿ç”¨

### å¯¹è±¡ç±»å‹

#### 1) Function(å‡½æ•°):star::star:

##### å®šä¹‰å‡½æ•°

```js
function å‡½æ•°å(å‚æ•°) {
    // å‡½æ•°ä½“
    return ç»“æœ;
}
```

ä¾‹

```js
function add(a, b) {
    return a + b;
}
```



##### è°ƒç”¨å‡½æ•°

```js
å‡½æ•°å(å®å‚);
```

ä¾‹

```js
add(1, 2);     // è¿”å› 3
```

**js ä¸­çš„å‡½æ•°è°ƒç”¨ç‰¹ç‚¹ï¼šå¯¹å‚æ•°çš„ç±»å‹å’Œä¸ªæ•°éƒ½æ²¡æœ‰é™åˆ¶**ï¼Œä¾‹å¦‚

```js
// å¯¹ç±»å‹æ²¡é™åˆ¶
add('a', 'b');  // è¿”å› ab
add(4, 5, 6);   // è¿”å› 9, ç¬¬ä¸‰ä¸ªå‚æ•°æ²¡æœ‰è¢«ç”¨åˆ°, ä¸ä¼šæŠ¥é”™
// å¯¹å‚æ•°ä¸ªæ•°æ²¡é™åˆ¶
add(1);			// è¿”å› NaN, è¿™æ—¶ b æ²¡æœ‰å®šä¹‰æ˜¯ undefined, undefined åšæ•°å­¦è¿ç®—ç»“æœå°±æ˜¯ NaNï¼ˆ1 + undefinedï¼‰
```



##### é»˜è®¤å‚æ•°

- java ä¸­ï¼ˆspringï¼‰è¦å®ç°é»˜è®¤å‚æ•°çš„æ•ˆæœå¾—è¿™ä¹ˆåšï¼š

ç”¨ `@RequestParam(defaultValue="1")` æŒ‡å®šå‚æ•°é»˜è®¤å€¼

```java
@RestController 
public class MyController {
    
    @RequestMapping("/page")
    @ResponseBody
    public void page(
        @RequestParam(defaultValue="1") int page, 
        @RequestParam(defaultValue="10") int size
    ){
        // ...
    }
}
```

- åœ¨ js ä¸­ï¼Œç›´æ¥ç”¨ `å‚æ•° = å€¼` çš„å½¢å¼å°±å¯ä»¥èµ‹é»˜è®¤å€¼ï¼š

```js
function pagination(page = 1, size = 10) {
    console.log(page, size);
}
```



##### åŒ¿åå‡½æ•°

è¯­æ³•ï¼Œå°æ‹¬å·åŒ…å«æ•´ä¸ªå‡½æ•°å†…å®¹

```js
(function (å‚æ•°) {
    // å‡½æ•°ä½“
    return ç»“æœ;
})
```

ä¾‹

```js
(function(a,b){
    return a + b;
})
```

> ç¬¬ä¸€ç§åœºæ™¯ï¼šå®šä¹‰å®Œæ¯•åç«‹åˆ»è°ƒç”¨

```js
(function(a,b){
    return a + b;
})(1,2)
```

> ç¬¬äºŒç§åœºæ™¯ï¼šä½œä¸ºå…¶å®ƒå¯¹è±¡çš„æ–¹æ³•ï¼Œä¾‹å¦‚

é¡µé¢æœ‰å…ƒç´ 

```html
<p id="p1">ç‚¹æˆ‘å•Š</p>
```

æ­¤å…ƒç´ æœ‰ä¸€ä¸ª `onclick` æ–¹æ³•ï¼Œä¼šåœ¨é¼ æ ‡å•å‡»è¿™ä¸ªå…ƒç´ åè¢«æ‰§è¡Œï¼Œ**`onclick` æ–¹æ³•åˆšå¼€å§‹æ˜¯ nullï¼Œéœ€è¦èµ‹å€¼åæ‰èƒ½ä½¿ç”¨**ã€‚

```js
document.getElementById("p1").onclick = (function(){
    console.log("é¼ æ ‡å•å‡»äº†...");
});
```



##### ç®­å¤´å‡½æ•°

```js
(å‚æ•°) => {
    // å‡½æ•°ä½“
    return ç»“æœ;
}
```

è¯­æ³•è§„åˆ™ï¼Œæœ‰ç‚¹åƒ java ä¸­çš„ Lambda è¡¨è¾¾å¼ï¼š

* å¦‚æœ**æ²¡æœ‰å‚æ•°**ï¼Œ`()` è¿˜æ˜¯è¦ä¿ç•™

  ```js
  const sayHello = () => {
    console.log("Hello!");
  };
  
  sayHello();
  ```

* å¦‚æœ**åªæœ‰ä¸€ä¸ªå‚æ•°**ï¼Œ`()` å¯ä»¥çœç•¥

  ```js
  const double = number => {
    return number * 2;
  };
  
  console.log(double(5));
  ```

* å¦‚æœ**å‡½æ•°ä½“å†…åªæœ‰ä¸€è¡Œä»£ç **ï¼Œ`{}` å¯ä»¥çœç•¥

  ```js
  const sayHi = () => console.log("Hi!");
  
  sayHi();
  
  document.getElementById("p1").onclick = () =>  console.log("aa");
  ```

* å¦‚æœ**è¿™ä¸€è¡Œä»£ç å°±æ˜¯ç»“æœ**ï¼Œ`return` å¯ä»¥çœç•¥

  ```js
  const multiply = (a, b) => a * b;
  
  console.log(multiply(2, 3));
  ```

  

##### å‡½æ•°æ˜¯å¯¹è±¡

**ä»¥ä¸‹å½¢å¼åœ¨ js ä¸­éå¸¸å¸¸è§ï¼**

> 1. å¯ä»¥å‚ä¸èµ‹å€¼ï¼Œä¾‹ï¼Œå…·åå‡½æ•°ä¹Ÿèƒ½å‚ä¸èµ‹å€¼

```js
function abc() {
    console.log("bb");
}
// å°†å‡½æ•°èµ‹å€¼åˆ° onclick æ–¹æ³•ä¸­
document.getElementById("p1").onclick = abc;
```

> 2. æœ‰å±æ€§ã€æœ‰æ–¹æ³•ï¼Œæ‰§è¡Œ `console.dir(abc)`ï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹

```
Æ’ abc()
    arguments: null
    caller: null
    length: 0
    name: "abc"
    â¡prototype: {constructor: Æ’}
    [[FunctionLocation]]: VM1962:1
    â¡[[Prototype]]: Æ’ ()
    â¡[[Scopes]]: Scopes[1]
```

* å…¶ä¸­å¸¦æœ‰ f æ ‡è®°çš„æ˜¯æ–¹æ³•ï¼Œä¸å¸¦çš„æ˜¯å±æ€§
* å¸¦æœ‰ â¡ ç¬¦å·çš„å¯ä»¥ç»§ç»­å±•å¼€ï¼Œé™äºç¯‡å¹…çœç•¥äº†

* å¸¦æœ‰ `[[ ]]` çš„æ˜¯**å†…ç½®å±æ€§**ï¼Œä¸èƒ½è®¿é—®ï¼Œåªèƒ½æŸ¥çœ‹
* ç›¸å¯¹é‡è¦çš„æ˜¯ `[[Prototype]]` å’Œ `[[Scopes]]` ä¼šåœ¨åé¢ç»§æ‰¿å’Œä½œç”¨åŸŸæ—¶è®²åˆ°

> 3. å¯ä»¥ä½œä¸ºæ–¹æ³•å‚æ•°

```js
function a() {
    console.log('a')
}

function b(fn) {          // fn å°†æ¥å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡
    console.log('b')
    fn();                 // è°ƒç”¨å‡½æ•°å¯¹è±¡
}

b(a)
```

> 4. å¯ä»¥ä½œä¸ºæ–¹æ³•è¿”å›å€¼

```js
function c() {
    console.log("c");
    function d() {
        console.log("d");
    }
    return d;
}

c()()
```



##### å‡½æ•°ä½œç”¨åŸŸ

å‡½æ•°å¯ä»¥åµŒå¥—ï¼ˆjs ä»£ç ä¸­å¾ˆå¸¸è§ï¼Œåªæ˜¯åµŒå¥—çš„å½¢å¼æ›´å¤šæ˜¯åŒ¿åå‡½æ•°ï¼Œç®­å¤´å‡½æ•°ï¼‰

```js
function a() {
    function b() {        
    }
}
```

çœ‹ä¸‹é¢çš„ä¾‹å­

```js
function c() {
    var z = 30;
}

var x = 10; // å…¨å±€ä½œç”¨åŸŸ
function a() {
    var y = 20; // å±€éƒ¨ä½œç”¨åŸŸï¼Œåªèƒ½åœ¨ a() å’Œ b() ä¸­è®¿é—®
    function b() {
        // çœ‹è¿™é‡Œ
        console.log(x, y);
    }
    b(); // è¾“å‡º 10 20
}

a(); // 10 20
```

* ä»¥å‡½æ•°ä¸ºåˆ†ç•Œçº¿åˆ’å®šä½œç”¨åŸŸï¼Œæ‰€æœ‰å‡½æ•°ä¹‹å¤–æ˜¯å…¨å±€ä½œç”¨åŸŸ
* æŸ¥æ‰¾å˜é‡æ—¶ï¼Œç”±å†…å‘å¤–æŸ¥æ‰¾
  * åœ¨å†…å±‚ä½œç”¨åŸŸæ‰¾åˆ°å˜é‡ï¼Œå°±ä¼šåœæ­¢æŸ¥æ‰¾ï¼Œä¸ä¼šå†æ‰¾å¤–å±‚
  * æ‰€æœ‰ä½œç”¨åŸŸéƒ½æ‰¾ä¸åˆ°å˜é‡ï¼ŒæŠ¥é”™
* ä½œç”¨åŸŸæœ¬è´¨ä¸Šæ˜¯å‡½æ•°å¯¹è±¡çš„å±æ€§ï¼Œ**å¯ä»¥é€šè¿‡ `console.dir` æ¥æŸ¥çœ‹è°ƒè¯•**



##### é—­åŒ…

* å‡½æ•°å®šä¹‰æ—¶ï¼Œå®ƒçš„ä½œç”¨åŸŸå·²ç»ç¡®å®šå¥½äº†ï¼Œå› æ­¤æ— è®ºå‡½æ•°å°†æ¥å»äº†å“ªï¼Œéƒ½èƒ½ä»å®ƒçš„ä½œç”¨åŸŸä¸­æ‰¾åˆ°å½“æ—¶é‚£äº›å˜é‡
* åˆ«è¢«æ¦‚å¿µå¿½æ‚ äº†ï¼Œé—­åŒ…å°±æ˜¯æŒ‡**å‡½æ•°èƒ½å¤Ÿè®¿é—®è‡ªå·±çš„ä½œç”¨åŸŸä¸­å˜é‡**

```js
var x = 10;
function a() {
    var y = 20;
    function b() {
        console.log(x,y);
    }
    return b;
}
// åœ¨å¤–é¢æ‰§è¡Œäº† bï¼Œé€šè¿‡è°ƒç”¨a()()ï¼Œé¦–å…ˆæ‰§è¡Œa()å‡½æ•°ï¼Œç„¶åå† è°ƒç”¨è¿”å›çš„å‡½æ•°b
a()(); // æœ€ç»ˆçš„è¾“å‡ºç»“æœè¿˜æ˜¯ 10 20

```



##### letã€var ä¸ä½œç”¨åŸŸ

> å¦‚æœå‡½æ•°å¤–å±‚å¼•ç”¨çš„æ˜¯ `let å˜é‡`ï¼Œé‚£ä¹ˆå¤–å±‚æ™®é€šçš„ `{}` ä¹Ÿä¼šä½œä¸ºä½œç”¨åŸŸè¾¹ç•Œï¼Œ**æœ€å¤–å±‚çš„ let ä¹Ÿå ä¸€ä¸ª script ä½œç”¨åŸŸ**

```js
let x = 10; 
if(true) {
    let y = 20;
    function b() {
        console.log(x,y);
    }
    console.dir(b);
}
```

> å¦‚æœå‡½æ•°å¤–å±‚å¼•ç”¨çš„æ˜¯ `var å˜é‡`ï¼Œå¤–å±‚æ™®é€šçš„ `{}` ä¸ä¼šè§†ä¸ºè¾¹ç•Œ

```js
var x = 10; 
if(true) {
    var y = 20; // æ³¨æ„ï¼Œæ˜¯åœ¨ b å‡½æ•°å¤–å®šä¹‰çš„
    function b() {
        console.log(x,y);
    }
    console.dir(b);
}
```

> å¦‚æœ var å˜é‡å‡ºç°äº†é‡åï¼Œåˆ™ä»–ä¿©ä¼šè¢«è§†ä¸ºåŒä¸€ä½œç”¨åŸŸä¸­çš„åŒä¸€ä¸ªå˜é‡

```js
var e = 10; 
if(true) {
    var e = 20;
    console.log(e);	// æ‰“å° 20
}
console.log(e);		// å› ä¸ºæ˜¯åŒä¸€ä¸ªå˜é‡ï¼Œè¿˜æ˜¯æ‰“å° 20
```

> å¦‚æœæ˜¯ letï¼Œåˆ™è§†ä¸ºä¸¤ä¸ªä½œç”¨åŸŸä¸­çš„ä¸¤ä¸ªå˜é‡ï¼Œä¸€ä¸ªå…¨å±€èŒƒå›´ï¼Œä¸€ä¸ªå—å±€èŒƒå›´

```js
let e = 10; 
if(true) {
    let e = 20;	
    console.log(e);	// æ‰“å° 20
}
console.log(e);		// æ‰“å° 10
```

> è¦æƒ³é‡Œé¢çš„ e å’Œå¤–é¢çš„ e èƒ½åŒºåˆ†å¼€æ¥ï¼Œæœ€ç®€å•çš„åŠæ³•æ˜¯**æ”¹æˆ let**ï¼Œ**æˆ–è€…ç”¨å‡½æ•°**æ¥ç•Œå®šä½œç”¨åŸŸèŒƒå›´

```js
var e = 10; 
if(true) {
    function b() {
        var e = 20;
    	console.log(e);
    }
    b(); // 20
}
console.log(e); // 10	
```

å‡½æ•° `b()` çš„ä½œç”¨åŸŸä¸å¤–éƒ¨ä½œç”¨åŸŸæ˜¯åˆ†ç¦»çš„ï¼Œå› æ­¤**åœ¨å‡½æ•° `b()` å†…éƒ¨å£°æ˜çš„å˜é‡ `e` ä¸ä¼šå½±å“å¤–éƒ¨ä½œç”¨åŸŸä¸­çš„å˜é‡ `e`**ã€‚å› æ­¤ï¼Œå‡½æ•° `b()` å†…éƒ¨çš„ `console.log(e)` ä¼šæ‰“å° `20`ï¼Œè€Œå¤–éƒ¨çš„ `console.log(e)` ä¼šæ‰“å°æœ€åˆçš„å€¼ `10`ã€‚



#### 2) Array :star:

> è¯­æ³•

```js
// åˆ›å»ºæ•°ç»„
let arr = [1,2,3]; 

// è·å–æ•°ç»„å…ƒç´ 
console.log(arr[0]); // è¾“å‡º 1

// ä¿®æ”¹æ•°ç»„å…ƒç´ 
array[0] = 5;		 // æ•°ç»„å…ƒç´ å˜æˆäº† [5,2,3]

// éå†æ•°ç»„å…ƒç´ ï¼Œå…¶ä¸­ length æ˜¯æ•°ç»„å±æ€§ï¼Œä»£è¡¨æ•°ç»„é•¿åº¦
for(let i = 0; i < arr.length; i++) {
    console.log(arr[i]);
}
```

> API

* `push` ã€å°¾éƒ¨ã€‘æ·»åŠ ã€`shift` ã€å¤´éƒ¨ã€‘ç§»é™¤ã€`splice` åˆ é™¤ã€å‚æ•°1ã€‘ç´¢å¼•ä½ç½®å¼€å§‹çš„ã€å‚æ•°2ã€‘ä¸ªå…ƒç´ 

```js
let arr = [1,2,3]; 

arr.push(4);    	// å‘æ•°ç»„å°¾éƒ¨(å³ä¾§)æ·»åŠ å…ƒç´ , ç»“æœ [1,2,3,4]
arr.shift();		// ä»æ•°ç»„å¤´éƒ¨(å·¦ä¾§)ç§»é™¤å…ƒç´ , ç»“æœ [2,3,4]
arr.splice(1,1);	// åˆ é™¤ã€å‚æ•°1ã€‘ç´¢å¼•ä½ç½®çš„ã€å‚æ•°2ã€‘ä¸ªå…ƒç´ ï¼Œç»“æœ [2,4]
```

* `join`

ç”¨äºå°†æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

è¯­æ³•ï¼š`array.join(separator)`

`separator`ï¼šå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºåœ¨è¿æ¥æ•°ç»„å…ƒç´ æ—¶ä½¿ç”¨çš„åˆ†éš”ç¬¦å­—ç¬¦ä¸²ã€‚å¦‚æœçœç•¥è¯¥å‚æ•°ï¼Œåˆ™é»˜è®¤ä½¿ç”¨é€—å· `,` ä½œä¸ºåˆ†éš”ç¬¦ã€‚

```js
let arr = ['a','b','c'];

arr.join(); 		// é»˜è®¤ä½¿ç”¨ã€,ã€‘ä½œä¸ºè¿æ¥ç¬¦ï¼Œç»“æœ 'a,b,c'
arr.join('');		// ç»“æœ 'abc'
arr.join('-');		// ç»“æœ 'a-b-c'
```

* `map`ã€`filter`ã€`forEach`

> map ä¾‹å­ -- å¤„ç†å…ƒç´ ï¼Œè¿”å›æ–°æ•°ç»„

- `map` æ–¹æ³•ç”¨äºéå†æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶å¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡ŒæŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œç„¶åå°†è¿”å›çš„å€¼ç»„æˆä¸€ä¸ªæ–°æ•°ç»„ã€‚
- å®ƒ**è¿”å›ä¸€ä¸ªæ–°æ•°ç»„**ï¼Œå…¶ä¸­åŒ…å«æ¯ä¸ªå…ƒç´ ç»è¿‡å›è°ƒå‡½æ•°å¤„ç†åçš„ç»“æœã€‚
- å›è°ƒå‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ çš„å€¼ã€å½“å‰ç´¢å¼•å’Œæ•°ç»„æœ¬èº«ã€‚

```js
let arr = [1,2,3,6];

function a(i) {   // ä»£è¡¨çš„æ–°æ—§å…ƒç´ ä¹‹é—´çš„å˜æ¢è§„åˆ™
    return i * 10
}

// arr.map(a) // å…·åå‡½æ•°ï¼Œç»“æœ [10,20,30,60]

// arr.map( (i) => {return i * 10} ); // ç®­å¤´å‡½æ•°
arr.map( i => i * 10 ); // ç®­å¤´å‡½æ•°
```

- ä¼ ç»™ map çš„å‡½æ•°ï¼Œå‚æ•°ä»£è¡¨æ—§å…ƒç´ ï¼Œè¿”å›å€¼ä»£è¡¨æ–°å…ƒç´ 

map çš„å†…éƒ¨å®ç°ï¼ˆä¼ªä»£ç ï¼‰

```js
function map(a) { // å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°
    let narr = [];
    for(let i = 0; i < arr.length; i++) {
        let o = arr[i]; // æ—§å…ƒç´ 
        let n = a(o);   // æ–°å…ƒç´ 
        narr.push(n);
    }
    return narr;
} 
```

> filter ä¾‹å­ -- ç­›é€‰å…ƒæ•°ï¼Œè¿”å›æ–°æ•°ç»„

- `filter` æ–¹æ³•ç”¨äºéå†æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶å¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡ŒæŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œç„¶åæ ¹æ®å›è°ƒå‡½æ•°çš„è¿”å›å€¼æ¥**ç­›é€‰**å‡ºç¬¦åˆæ¡ä»¶çš„å…ƒç´ ç»„æˆä¸€ä¸ªæ–°æ•°ç»„ã€‚
- å®ƒè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«æ»¡è¶³å›è°ƒå‡½æ•°æ¡ä»¶çš„å…ƒç´ ã€‚
- å›è°ƒå‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ çš„å€¼ã€å½“å‰ç´¢å¼•å’Œæ•°ç»„æœ¬èº«ã€‚

```js
let arr = [1,2,3,6];
arr.filter( (i)=> i % 2 == 1 ); // ç»“æœ [1,3]
```

* ä¼ ç»™ filter çš„å‡½æ•°ï¼Œå‚æ•°ä»£è¡¨æ—§å…ƒç´ ï¼Œè¿”å› true è¡¨ç¤ºè¦ç•™ä¸‹çš„å…ƒç´ 

> forEach ä¾‹å­ -- éå†æ•°ç»„ï¼Œæ²¡æœ‰è¿”å›å€¼

- `forEach` æ–¹æ³•ç”¨äºéå†æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶å¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡ŒæŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚
- å®ƒæ²¡æœ‰è¿”å›å€¼ï¼Œåªæ˜¯ä¾æ¬¡å¯¹æ•°ç»„çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚
- å›è°ƒå‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ çš„å€¼ã€å½“å‰ç´¢å¼•å’Œæ•°ç»„æœ¬èº«ã€‚

```js
let arr = [1,2,3,6];

/*for(let i = 0; i < arr.length; i++) {
    console.log(arr[i]);
}*/

arr.forEach( (i) => console.log(i) );
```

ä¸¤ä¸ªç§°å‘¼

* é«˜é˜¶å‡½æ•°ï¼Œmapï¼Œfilterï¼ŒforEach
* å›è°ƒå‡½æ•°ï¼Œä¾‹å¦‚ä½œä¸ºå‚æ•°ä¼ å…¥çš„å‡½æ•°



#### 3) Object :star::star:

##### è¯­æ³•

```js
let obj = {
    å±æ€§å: å€¼,
    æ–¹æ³•å: å‡½æ•°,
    get å±æ€§å() {},
    set å±æ€§å(æ–°å€¼) {}
}
```

ä¾‹1

```js
let stu1 = {
    name: "å°æ˜",
    age: 18,
    study: function(){
        console.log(this.name + "çˆ±å­¦ä¹ ");
    }    
}
```

ä¾‹2

```js
let name = "å°é»‘";
let age = 20;
let study = function(){
    console.log(this.name + "çˆ±å­¦ä¹ ");
}

let stu2 = { name, age, study }
```

ä¾‹3ï¼ˆé‡ç‚¹ï¼‰

```js
let stu3 = {
    name: "å°ç™½",
    age: 18,
    study(){
        console.log(this.name + "çˆ±å­¦ä¹ ");
    }    
}
```

* **æ³¨æ„**ï¼š`å¯¹è±¡æ–¹æ³•`è¿™ä¹ˆå†™ï¼Œä»…é™äºå¯¹è±¡å†…éƒ¨

ä¾‹4

```js
let stu4 = {
    _name: null, /*ç±»ä¼¼äºjavaä¸­ç§æœ‰æˆå‘˜å˜é‡*/
    get name() {
        console.log("è¿›å…¥äº†get");
        return this._name;
    },
    set name(name) {
        console.log("è¿›å…¥äº†set");
        this._name = name;
    }
}
```

è°ƒç”¨ getï¼Œset

```js
stu4.name = "å°ç™½"

console.log(stu4.name)
```



##### ç‰¹è‰²ï¼šå±æ€§å¢åˆ 

å¯¹æ¯”ä¸€ä¸‹ Java ä¸­çš„ Object

* Java çš„ Object æ˜¯ä»¥ç±»ä½œä¸ºæ¨¡æ¿æ¥åˆ›å»ºï¼Œå¯¹è±¡ä¸èƒ½è„±ç¦»ç±»æ¨¡æ¿çš„èŒƒå›´ï¼Œä¸€ä¸ªå¯¹è±¡çš„å±æ€§ã€èƒ½ç”¨çš„æ–¹æ³•éƒ½æ˜¯ç¡®å®šå¥½çš„
* js çš„å¯¹è±¡ï¼Œä¸éœ€è¦ä»€ä¹ˆæ¨¡æ¿ï¼Œå®ƒçš„å±æ€§å’Œæ–¹æ³•å¯ä»¥éšæ—¶åŠ å‡

```js
let stu = {name:'å¼ ä¸‰'};
stu.age = 18;					// æ·»åŠ å±æ€§
delete stu.age;					// åˆ é™¤å±æ€§

stu.study = function() {		// æ·»åŠ æ–¹æ³•
    console.log(this.name + "åœ¨å­¦ä¹ ");
}
```

æ·»åŠ  getï¼Œsetï¼Œéœ€è¦å€ŸåŠ© `Object.definePropery`

```js
let stu = {_name:null};

Object.defineProperty(stu, "name", {
    get(){
        return this._name;
    },
    set(name){
        this._name = name;
    }
});
```

* å‚æ•°1ï¼šç›®æ ‡å¯¹è±¡
* å‚æ•°2ï¼šå±æ€§å
* å‚æ•°3ï¼šgetï¼Œset çš„å®šä¹‰



##### ç‰¹è‰²ï¼šthis

1. å…ˆæ¥å¯¹ Java ä¸­çš„ this æœ‰ä¸ªç†è§£

```java
public class TestMethod {

    static class Student {
        private String name;

        public Student(String name) {
            this.name = name;
        }

        public void study(Student this, String subject) {
            System.out.println(this.name + "åœ¨å­¦ä¹  " + subject);
        }
    }

    public static void main(String[] args) {
        Student stu = new Student("å°æ˜");
        
        // ä¸‹é¢çš„ä»£ç ï¼Œæœ¬è´¨ä¸Šæ˜¯æ‰§è¡Œ study(stu, "java")ï¼Œå› æ­¤ this å°±æ˜¯ stu
        stu.study("java"); 
    }
}
```

* Java ä¸­çš„ `this` æ˜¯ä¸ª**éšå¼å‚æ•°**
* Java ä¸­ï¼Œæˆ‘ä»¬è¯´ `this` ä»£è¡¨çš„**å°±æ˜¯è°ƒç”¨æ–¹æ³•çš„é‚£ä¸ªå¯¹è±¡**



2. js ä¸­çš„ this ä¹Ÿæ˜¯éšå¼å‚æ•°ï¼Œä½†å®ƒ**ä¸å‡½æ•°è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ç›¸å…³**

> ä¾‹å¦‚ï¼Œä¸€ä¸ªâ€œè½å•â€çš„å‡½æ•°

```js
function study(subject) {
    console.log(this.name + "åœ¨å­¦ä¹  " + subject)
}
```

æµ‹è¯•ä¸€ä¸‹

```js
study("js");  // è¾“å‡º åœ¨å­¦ä¹  js
```

è¿™æ˜¯å› ä¸ºæ­¤æ—¶å‡½æ•°æ‰§è¡Œï¼Œå…¨å±€å¯¹è±¡ window è¢«å½“ä½œäº† thisï¼Œwindow å¯¹è±¡çš„ name å±æ€§æ˜¯ç©ºä¸²

> åŒæ ·çš„å‡½æ•°ï¼Œå¦‚æœä½œä¸ºå¯¹è±¡çš„æ–¹æ³•

```js
let stu = {
    name:"å°ç™½",
    study
}
```

è¿™ç§æƒ…å†µä¸‹ï¼Œä¼šå°†å½“å‰å¯¹è±¡ä½œä¸º this

```js
stu.study('js'); 	// è¾“å‡º å°ç™½åœ¨å­¦ä¹  js
```

> è¿˜å¯ä»¥åŠ¨æ€æ”¹å˜ this

```js
let stu = {name:"å°é»‘"};
study.call(stu, "js");	// è¾“å‡º å°é»‘åœ¨å­¦ä¹  js
```

ä½¿ç”¨äº† `call` æ–¹æ³•æ¥è°ƒç”¨ `study` å‡½æ•°ï¼Œè¿™å› study æ‰§è¡Œæ—¶ï¼Œå°±æŠŠ call çš„ç¬¬ä¸€ä¸ªå‚æ•° stu ä½œä¸º this

> ä¸€ä¸ªä¾‹å¤–æ˜¯ï¼Œåœ¨**ç®­å¤´å‡½æ•°**å†…å‡ºç°çš„ thisï¼Œä»¥å¤–å±‚ this ç†è§£ 

1. ç”¨åŒ¿åå‡½æ•°

```js
let stu = {
    name: "å°èŠ±",
    friends: ["å°ç™½","å°é»‘","å°æ˜"],
    play() {
        this.friends.forEach(function(e){
            console.log(this.name + "ä¸" + e + "åœ¨ç©è€");
        });
    }
}
stu.play()
```

* this.name æ‰€åœ¨çš„å‡½æ•°æ˜¯ã€è½å•ã€‘çš„å‡½æ•°ï¼Œå› æ­¤ **this ä»£è¡¨ window**

è¾“å‡ºç»“æœä¸º

```
ä¸å°ç™½åœ¨ç©è€
ä¸å°é»‘åœ¨ç©è€
ä¸å°æ˜åœ¨ç©è€
```

2. ç”¨ç®­å¤´å‡½æ•°

```js
let stu = {
    name: "å°èŠ±",
    friends: ["å°ç™½","å°é»‘","å°æ˜"],
    play() {
        this.friends.forEach(e => {
            console.log(this.name + "ä¸" + e + "åœ¨ç©è€");
        })
    }    
}
```

* this.name æ‰€åœ¨çš„å‡½æ•°æ˜¯ç®­å¤´å‡½æ•°ï¼Œå› æ­¤ this è¦çœ‹å®ƒå¤–å±‚çš„ play å‡½æ•°ï¼Œplay åˆæ˜¯å±äº stu çš„æ–¹æ³•ï¼Œå› æ­¤ **this ä»£è¡¨ stu å¯¹è±¡**

è¾“å‡ºç»“æœä¸º

```
å°èŠ±ä¸å°ç™½åœ¨ç©è€
å°èŠ±ä¸å°é»‘åœ¨ç©è€
å°èŠ±ä¸å°æ˜åœ¨ç©è€
```

3. ä¸ç”¨ç®­å¤´å‡½æ•°çš„åšæ³•

```js
let stu = {
    name: "å°èŠ±",
    friends: ["å°ç™½","å°é»‘","å°æ˜"],
    play() {
        let me = this; // æŒ‡å®šthis
        this.friends.forEach(function(e){
            console.log(me.name + "ä¸" + e + "åœ¨ç©è€");
        });
    }
}
```



##### ç‰¹è‰²ï¼šåŸå‹ç»§æ‰¿

```js
let father = {
    f1: 'çˆ¶å±æ€§',
    m1: function() {
        console.log("çˆ¶æ–¹æ³•");
    }
}

let son = Object.create(father);

console.log(son.f1);  // æ‰“å° çˆ¶å±æ€§
son.m1();			  // æ‰“å° çˆ¶æ–¹æ³•
```

* father æ˜¯çˆ¶å¯¹è±¡ï¼Œson å»è°ƒç”¨ .m1 æˆ– .f1 æ—¶ï¼Œè‡ªèº«å¯¹è±¡æ²¡æœ‰ï¼Œå°±åˆ°çˆ¶å¯¹è±¡æ‰¾
* son è‡ªå·±å¯ä»¥æ·»åŠ è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•
* son é‡Œæœ‰ç‰¹æ®Šå±æ€§ `__proto__` ä»£è¡¨å®ƒçš„çˆ¶å¯¹è±¡ï¼Œjs æœ¯è¯­ï¼š son çš„åŸå‹å¯¹è±¡
* ä¸åŒæµè§ˆå™¨å¯¹æ‰“å° son çš„ `__proto__` å±æ€§æ—¶æ˜¾ç¤ºä¸åŒ
  * Edge æ‰“å° console.dir(son) æ˜¾ç¤º `[[Prototype]]`
  * Firefox æ‰“å° console.dir(son) æ˜¾ç¤º `<prototype>`



##### ç‰¹è‰²ï¼šåŸºäºå‡½æ•°çš„åŸå‹ç»§æ‰¿

å‡ºäºæ–¹ä¾¿çš„åŸå› ï¼Œjs åˆæä¾›äº†ä¸€ç§åŸºäºå‡½æ•°çš„åŸå‹ç»§æ‰¿

> **å‡½æ•°èŒè´£**
>
> 1. è´Ÿè´£åˆ›å»ºå­å¯¹è±¡ï¼Œç»™å­å¯¹è±¡æä¾›å±æ€§ã€æ–¹æ³•ï¼ŒåŠŸèƒ½ä¸Šç›¸å½“äºæ„é€ æ–¹æ³•
>
> 2. å‡½æ•°æœ‰ä¸ªç‰¹æ®Šçš„å±æ€§ `prototype`ï¼Œå®ƒå°±æ˜¯å‡½æ•°åˆ›å»ºçš„å­å¯¹è±¡çš„çˆ¶å¯¹è±¡
>
>    **æ³¨æ„ï¼**åå­—æœ‰å·®å¼‚ï¼Œè¿™ä¸ªå±æ€§çš„ä½œç”¨å°±æ˜¯ä¸ºæ–°å¯¹è±¡æä¾›åŸå‹

```js
function cons(f2) {
    // åˆ›å»ºå­å¯¹è±¡(this), ç»™å­å¯¹è±¡æä¾›å±æ€§å’Œæ–¹æ³•
    this.f2 = f2;
    this.m2 = function () {
        console.log("å­æ–¹æ³•");
    }
}
// cons.prototype å°±æ˜¯çˆ¶å¯¹è±¡
cons.prototype.f1 = "çˆ¶å±æ€§";
cons.prototype.m1 = function() {
    console.log("çˆ¶æ–¹æ³•");
}
```

é…åˆ `new` å…³é”®å­—ï¼Œåˆ›å»ºå­å¯¹è±¡

```js
let son = new cons("å­å±æ€§")
```

å­å¯¹è±¡çš„ `__proto__` å°±æ˜¯å‡½æ•°çš„ `prototype` å±æ€§



##### JSON

ä¹‹å‰æˆ‘ä»¬è®² http è¯·æ±‚æ ¼å¼æ—¶ï¼Œè®²è¿‡ json è¿™ç§æ•°æ®æ ¼å¼ï¼Œå®ƒçš„è¯­æ³•çœ‹èµ·æ¥ä¸ js å¯¹è±¡éå¸¸ç›¸ä¼¼ï¼Œä¾‹å¦‚ï¼š

ä¸€ä¸ª json å¯¹è±¡å¯ä»¥é•¿è¿™æ ·ï¼š

```json
{
    "name":"å¼ ä¸‰",
    "age":18
}
```

ä¸€ä¸ª js å¯¹è±¡é•¿è¿™æ ·ï¼š

```js
{
    name:"å¼ ä¸‰",
    age:18
}
```

é‚£ä¹ˆä»–ä»¬çš„åŒºåˆ«åœ¨å“ªå„¿å‘¢ï¼Ÿæˆ‘æ€»ç»“äº†è¿™ä¹ˆå‡ ç‚¹

1. æœ¬è´¨ä¸åŒ
   * json å¯¹è±¡æœ¬è´¨ä¸Šæ˜¯ä¸ª**å­—ç¬¦ä¸²**ï¼Œå®ƒçš„èŒè´£æ˜¯ä½œä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’æ•°æ®çš„ä¸€ç§æ ¼å¼ï¼Œå®ƒçš„å±æ€§åªæ˜¯æ ·å­è´§
   * js å¯¹è±¡æ˜¯åˆ‡åˆ‡å®å®çš„**å¯¹è±¡**ï¼Œå¯ä»¥æœ‰å±æ€§æ–¹æ³•
2. è¯­æ³•ç»†èŠ‚ä¸åŒ
   * json ä¸­åªèƒ½æœ‰ nullã€true|falseã€æ•°å­—ã€å­—ç¬¦ä¸²ï¼ˆåªæœ‰åŒå¼•å·ï¼‰ã€å¯¹è±¡ã€æ•°ç»„
   * json ä¸­ä¸èƒ½æœ‰é™¤ä»¥ä¸Šçš„å…¶å®ƒ js å¯¹è±¡çš„ç‰¹æ€§ï¼Œå¦‚æ–¹æ³•ç­‰
   * json ä¸­çš„å±æ€§å¿…é¡»ç”¨åŒå¼•å·å¼•èµ·æ¥



json å­—ç¬¦ä¸²ä¸ js å¯¹è±¡çš„è½¬æ¢

```js
JSON.parse(jsonå­—ç¬¦ä¸²);  // è¿”å›jså¯¹è±¡
JSON.stringify(jså¯¹è±¡);  // è¿”å›jsonå­—ç¬¦ä¸²
```



### ç±»å‹

#### é™æ€ç±»å‹

é™æ€ç±»å‹è¯­è¨€ï¼Œå¦‚ Java

- å€¼æœ‰ç±»å‹
- å˜é‡ä¹Ÿæœ‰ç±»å‹
- èµ‹å€¼ç»™å˜é‡æ—¶ï¼Œç±»å‹è¦ç›¸ç¬¦

```java
int a = 10;
String b = "abc";

int c = "abc";  // é”™è¯¯
```

#### åŠ¨æ€ç±»å‹

js å±äºåŠ¨æ€ç±»å‹è¯­è¨€

- å€¼æœ‰ç±»å‹
- ä½†å˜é‡æ²¡æœ‰ç±»å‹
- èµ‹å€¼ç»™å˜é‡æ—¶ï¼Œæ²¡è¦æ±‚

ä¾‹å¦‚

```js
let a = 200;

let b = 100;
b = 'abc';
b = true;
```

åŠ¨æ€ç±»å‹çœ‹èµ·æ¥æ¯”è¾ƒçµæ´»ï¼Œä½†**å˜é‡æ²¡æœ‰ç±»å‹ï¼Œä¼šç»™åæœŸç»´æŠ¤å¸¦æ¥å›°éš¾**ï¼Œä¾‹å¦‚

```js
function test(obj) {
    // obj çš„ç±»å‹æœªçŸ¥ï¼Œå¿…é¡»æ ¹æ®ä¸åŒç±»å‹åšå‡ºç›¸åº”çš„å®¹é”™å¤„ç†
}
```

## 2ã€è¿ç®—ç¬¦ä¸è¡¨è¾¾å¼

* `+ - * / % ** `
* `+= -= *= /= %= **=`
* `++ --`
* ä½è¿ç®—ã€ç§»ä½è¿ç®—
* `== != > >= < <=`
* `=== !==` :star:
* `&& || !` :star:
* `?? ?.` :star:
* `...` :star:
* è§£æ„èµ‹å€¼ :star:



### 1) ===

ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼Œç”¨ä½œé€»è¾‘åˆ¤ç­‰

- `==` ä¼šè¿›è¡Œç±»å‹è½¬æ¢
- `===` ä¸ä¼šè½¬æ¢ï¼Œç±»å‹ä¸ç­‰ç›´æ¥è¿”å› false

```js
1 == 1    	// è¿”å› true 
1 == '1'	// è¿”å› trueï¼Œä¼šå…ˆå°†å³ä¾§çš„å­—ç¬¦ä¸²è½¬ä¸ºæ•°å­—ï¼Œå†åšæ¯”è¾ƒ
1 === '1'	// è¿”å› falseï¼Œç±»å‹ä¸ç­‰ï¼Œç›´æ¥è¿”å› false
```

typeof æŸ¥çœ‹æŸä¸ªå€¼çš„ç±»å‹

```js
typeof 1	// è¿”å› 'number'
typeof '1'	// è¿”å› 'string'
```



### 2) ||

éœ€æ±‚ï¼Œå¦‚æœå‚æ•° n æ²¡æœ‰ä¼ é€’ï¼Œç»™å®ƒä¸€ä¸ªã€ç”·ã€‘

**æ¨è**åšæ³•

```js
function test(n = 'ç”·') {
    console.log(n);
}
```

ä½ å¯èƒ½çš„åšæ³•

```js
function test(n) {
    if(n === undefined) {
        n = 'ç”·';
    }
    console.log(n);
}
```

è¿˜å¯èƒ½æ˜¯è¿™æ ·

```js
function test(n) {
    n = (n === undefined) ? 'ç”·' : n;
    console.log(n);
}
```

ä¸€äº›è€æ—§ä»£ç ä¸­å¯èƒ½çš„åšæ³•ï¼ˆä¸æ¨èï¼‰

```js
function test(n) {
    n = n || 'ç”·';
    console.log(n);
}
```

å®ƒçš„è¯­æ³•æ˜¯

```js
å€¼1 || å€¼2
```

å¦‚æœå€¼1 æ˜¯ Truthyï¼Œè¿”å›å€¼1ï¼Œå¦‚æœå€¼1 æ˜¯ Falsy è¿”å›å€¼ 2



### 3) ?? ä¸ ?.

#### ??

éœ€æ±‚ï¼Œå¦‚æœå‚æ•° n æ²¡æœ‰ä¼ é€’æˆ–æ˜¯ nullï¼Œç»™å®ƒä¸€ä¸ªã€ç”·ã€‘

å¦‚æœç”¨ä¼ ç»ŸåŠæ³•

```js
function test(n) {
    if(n === undefined || n === null) {
        n = 'ç”·';
    }
    console.log(n);
}
```

ç”¨ ??

```js
function test(n) {
    n = n ?? 'ç”·';
    console.log(n);
}
```

è¯­æ³•

```
å€¼1 ?? å€¼2
```

* å€¼1 æ˜¯ nullishï¼Œè¿”å›å€¼2
* å€¼1 ä¸æ˜¯ nullishï¼Œè¿”å›å€¼1



#### ?.

éœ€æ±‚ï¼Œå‡½æ•°å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯èƒ½åŒ…å«æœ‰å­å±æ€§

ä¾‹å¦‚ï¼Œå‚æ•°å¯èƒ½æ˜¯

```js
let stu1 = {
    name:"å¼ ä¸‰",
    address: {
        city: 'åŒ—äº¬'
    }
};

let stu2 = {
    name:"æå››"
}

let stu3 = {
    name:"æå››",
    address: null
}
```

ç°åœ¨è¦è®¿é—®å­å±æ€§ï¼ˆæœ‰é—®é¢˜ï¼‰

```js
function test(stu) {
    console.log(stu.address.city)
}
```

ç°åœ¨å¸Œæœ›å½“æŸä¸ªå±æ€§æ˜¯ nullish æ—¶ï¼ŒçŸ­è·¯å¹¶è¿”å› undefinedï¼Œå¯ä»¥ç”¨ ?.

```js
function test(stu) {
    console.log(stu.address?.city)
}
```

ç”¨ä¼ ç»ŸåŠæ³• 

```js
function test(stu) {
    if(stu.address === undefined || stu.address === null) {
        console.log(undefined);
        return;
    }
    console.log(stu.address.city)
}
```



### 4) ...

å±•å¼€è¿ç®—ç¬¦

ä½œç”¨1ï¼šæ‰“æ•£æ•°ç»„ï¼ŒæŠŠå…ƒç´ ä¼ é€’ç»™å¤šä¸ªå‚æ•°

```js
let arr = [1,2,3];

function test(a,b,c) {
    console.log(a,b,c);
}
```

éœ€æ±‚ï¼ŒæŠŠæ•°ç»„å…ƒç´ ä¾æ¬¡ä¼ é€’ç»™å‡½æ•°å‚æ•°

ä¼ ç»Ÿå†™æ³•

```js
test(arr[0],arr[1],arr[2]);		// è¾“å‡º 1,2,3
```

å±•å¼€è¿ç®—ç¬¦å†™æ³•

```js
test(...arr);					// è¾“å‡º 1,2,3
```

* æ‰“æ•£å¯ä»¥ç†è§£ä¸ºã€å»æ‰äº†ã€‘æ•°ç»„å¤–ä¾§çš„ä¸­æ‹¬å·ï¼Œåªå‰©ä¸‹æ•°ç»„å…ƒç´ 



ä½œç”¨2ï¼šå¤åˆ¶æ•°ç»„æˆ–å¯¹è±¡

æ•°ç»„

```js
let arr1 = [1,2,3];
let arr2 = [...arr1];		// å¤åˆ¶æ•°ç»„
```

å¯¹è±¡

```js
let obj1 = {name:'å¼ ä¸‰', age: 18};

let obj2 = {...obj1};		// å¤åˆ¶å¯¹è±¡
```

**æ³¨æ„**ï¼šå±•å¼€è¿ç®—ç¬¦å¤åˆ¶å±äºæµ…æ‹·è´ï¼Œä¾‹å¦‚

```js
let o1 = {name:'å¼ ä¸‰', address: {city: 'åŒ—äº¬'} }

let o2 = {...o1};
```



ä½œç”¨3ï¼šåˆå¹¶æ•°ç»„æˆ–å¯¹è±¡

åˆå¹¶æ•°ç»„

```js
let a1 = [1,2];
let a2 = [3,4];

let b1 = [...a1,...a2];		// ç»“æœ [1,2,3,4]
let b2 = [...a2,5,...a1]	// ç»“æœ [3,4,5,1,2]
```

åˆå¹¶å¯¹è±¡

```js
let o1 = {name:'å¼ ä¸‰'};
let o2 = {age:18};
let o3 = {name:'æå››'};

let n1 = {...o1, ...o2};	// ç»“æœ {name:'å¼ ä¸‰',age:18}

let n2 = {...o3, ...o2, ...o1}; // ç»“æœ{name:'æå››',age:18}
```

* å¤åˆ¶å¯¹è±¡æ—¶å‡ºç°åŒåå±æ€§ï¼Œåé¢çš„ä¼šè¦†ç›–å‰é¢çš„



### 5) [] {}

è§£æ„èµ‹å€¼

#### []

ç”¨åœ¨å£°æ˜å˜é‡æ—¶

```js
let arr = [1,2,3];

let [a, b, c] = arr;	// ç»“æœ a=1, b=2, c=3
```

ç”¨åœ¨å£°æ˜å‚æ•°æ—¶

```js
let arr = [1,2,3];

function test([a,b,c]) {
    console.log(a,b,c) 	// ç»“æœ a=1, b=2, c=3
}

test(arr);				
```



#### {}

ç”¨åœ¨å£°æ˜å˜é‡æ—¶

```js
let obj = {name:"å¼ ä¸‰", age:18};

let {name,age} = obj;	// ç»“æœ name=å¼ ä¸‰, age=18
```

ç”¨åœ¨å£°æ˜å‚æ•°æ—¶

```js
let obj = {name:"å¼ ä¸‰", age:18};

function test({name, age}) {
    console.log(name, age); // ç»“æœ name=å¼ ä¸‰, age=18
}

test(obj)
```



## 3ã€æ§åˆ¶è¯­å¥

* `if ... else`
* `switch`
* `while`
* `do ... while`
* `for` 
* `for ... in` :star:
* `for ... of` :star:
* `try ... catch` :star:



### 1) for in

ä¸»è¦ç”¨æ¥éå†å¯¹è±¡

```js
let father = {name:'å¼ ä¸‰', age:18, study:function(){}};

for(const n in father) {
    console.log(n);
}
```

* å…¶ä¸­ const n ä»£è¡¨éå†å‡ºæ¥çš„å±æ€§å
* æ³¨æ„1ï¼šæ–¹æ³•åä¹Ÿèƒ½è¢«éå†å‡ºæ¥ï¼ˆå®ƒå…¶å®ä¹Ÿç®—ä¸€ç§ç‰¹æ®Šå±æ€§ï¼‰
* æ³¨æ„2ï¼šéå†å­å¯¹è±¡æ—¶ï¼Œçˆ¶å¯¹è±¡çš„å±æ€§ä¼šè·Ÿç€éå†å‡ºæ¥

```js
let son = Object.create(father);
son.sex = "ç”·";

for(const n in son) {
    console.log(n);
}
```

* æ³¨æ„3ï¼šåœ¨ for in å†…è·å–å±æ€§å€¼ï¼Œè¦ä½¿ç”¨ [] è¯­æ³•ï¼Œè€Œä¸èƒ½ç”¨ . è¯­æ³•

```js
for(const n in son) {
    console.log(n, son[n]);
}
```



### 2) for of

ä¸»è¦ç”¨æ¥éå†æ•°ç»„ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒå¯è¿­ä»£å¯¹è±¡ï¼Œå¦‚ Mapï¼ŒSet ç­‰

```js
let a1 = [1,2,3];

for(const i of a1) {
    console.log(i);
}

let a2 = [
    {name:'å¼ ä¸‰', age:18},
    {name:'æå››', age:20},
    {name:'ç‹äº”', age:22}
];

for(const obj of a2) {
    console.log(obj.name, obj.age);
}

for(const {name,age} of a2) {
    console.log(name, age);
}
```



### 3) try catch

```js
let stu1 = {name:'å¼ ä¸‰', age:18, address: {city:'åŒ—äº¬'}};
let stu2 = {name:'å¼ ä¸‰', age:18};

function test(stu) {
    try {
        console.log(stu.address.city)   
    } catch(e) {
        console.log('å‡ºç°äº†å¼‚å¸¸', e.message)
    } finally {
        console.log('finally');
    }
}
```

## 4ã€API

### ç¯å¢ƒå‡†å¤‡

#### 1) å®‰è£… nvm

nvm å³ (node version manager)ï¼Œå¥½å¤„æ˜¯æ–¹ä¾¿åˆ‡æ¢ node.js ç‰ˆæœ¬

å®‰è£…æ³¨æ„äº‹é¡¹

1. è¦å¸è½½æ‰ç°æœ‰çš„ nodejs
2. æç¤ºé€‰æ‹© nvm å’Œ nodejs ç›®å½•æ—¶ï¼Œä¸€å®šè¦é¿å…ç›®å½•ä¸­å‡ºç°ç©ºæ ¼
3. é€‰ç”¨ã€ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‘cmd ç¨‹åºæ¥æ‰§è¡Œ nvm å‘½ä»¤
4. é¦–æ¬¡è¿è¡Œå‰è®¾ç½®å¥½å›½å†…é•œåƒåœ°å€

```
nvm node_mirror http://npm.taobao.org/mirrors/node/
nvm npm_mirror https://npm.taobao.org/mirrors/npm/
```

é¦–å…ˆæŸ¥çœ‹æœ‰å“ªäº›å¯ç”¨ç‰ˆæœ¬

```
nvm list available
```

è¾“å‡º

```
|   CURRENT    |     LTS      |  OLD STABLE  | OLD UNSTABLE |
|--------------|--------------|--------------|--------------|
|    18.7.0    |   16.16.0    |   0.12.18    |   0.11.16    |
|    18.6.0    |   16.15.1    |   0.12.17    |   0.11.15    |
|    18.5.0    |   16.15.0    |   0.12.16    |   0.11.14    |
|    18.4.0    |   16.14.2    |   0.12.15    |   0.11.13    |
|    18.3.0    |   16.14.1    |   0.12.14    |   0.11.12    |
|    18.2.0    |   16.14.0    |   0.12.13    |   0.11.11    |
|    18.1.0    |   16.13.2    |   0.12.12    |   0.11.10    |
|    18.0.0    |   16.13.1    |   0.12.11    |    0.11.9    |
|    17.9.1    |   16.13.0    |   0.12.10    |    0.11.8    |
|    17.9.0    |   14.20.0    |    0.12.9    |    0.11.7    |
|    17.8.0    |   14.19.3    |    0.12.8    |    0.11.6    |
|    17.7.2    |   14.19.2    |    0.12.7    |    0.11.5    |
|    17.7.1    |   14.19.1    |    0.12.6    |    0.11.4    |
|    17.7.0    |   14.19.0    |    0.12.5    |    0.11.3    |
|    17.6.0    |   14.18.3    |    0.12.4    |    0.11.2    |
|    17.5.0    |   14.18.2    |    0.12.3    |    0.11.1    |
|    17.4.0    |   14.18.1    |    0.12.2    |    0.11.0    |
|    17.3.1    |   14.18.0    |    0.12.1    |    0.9.12    |
|    17.3.0    |   14.17.6    |    0.12.0    |    0.9.11    |
|    17.2.0    |   14.17.5    |   0.10.48    |    0.9.10    |
```

å»ºè®®å®‰è£… LTSï¼ˆé•¿æœŸæ”¯æŒç‰ˆï¼‰

```
nvm install 16.16.0
nvm install 14.20.0
```

æ‰§è¡Œ `nvm list` ä¼šåˆ—å‡ºå·²å®‰è£…ç‰ˆæœ¬

åˆ‡æ¢åˆ° 16.16.0

```
nvm use 16.16.0
```

åˆ‡æ¢åˆ° 14.20.0

```
nvm use 14.20.0
```

å®‰è£…å nvm è‡ªå·±çš„ç¯å¢ƒå˜é‡ä¼šè‡ªåŠ¨æ·»åŠ ï¼Œä½†å¯èƒ½éœ€è¦æ‰‹å·¥æ·»åŠ  nodejs çš„ PATH ç¯å¢ƒå˜é‡



#### 2) æ£€æŸ¥ npm

npm æ˜¯ js çš„åŒ…ç®¡ç†å™¨ï¼Œå°±ç±»ä¼¼äº java ç•Œçš„ mavenï¼Œè¦ç¡®ä¿å®ƒä½¿ç”¨çš„æ˜¯å›½å†…é•œåƒ

æ£€æŸ¥é•œåƒ

```
npm get registry
```

å¦‚æœè¿”å›çš„ä¸æ˜¯ `https://registry.npm.taobao.org/`ï¼Œéœ€è¦åšå¦‚ä¸‹è®¾ç½®

```
npm config set registry https://registry.npm.taobao.org/
```



#### 3) æ­å»ºå‰ç«¯æœåŠ¡å™¨

1. æ–°å»ºä¸€ä¸ªä¿å­˜é¡¹ç›®çš„ client æ–‡ä»¶å¤¹ï¼Œè¿›å…¥æ–‡ä»¶å¤¹æ‰§è¡Œ

```
npm install express --save-dev
```

2. ä¿®æ”¹ package.json æ–‡ä»¶

```json
{
  "type": "module",
  "devDependencies": {
    "express": "^4.18.1"
  }
}
```

* å…¶ä¸­ devDependencies æ˜¯ npm install --save-dev æ·»åŠ çš„

3. ç¼–å†™ main.js ä»£ç 

```js
import express from 'express'
const app = express()

app.use(express.static('./'))
app.listen(7070)
```

4. æ‰§è¡Œ js ä»£ç ï¼ˆè¿è¡Œå‰ç«¯æœåŠ¡å™¨ï¼‰

```
node main.js
```



### å‰ç«¯æ¡ˆä¾‹

> åˆæ­¥æ•ˆæœ

![image](https://cdn.jsdelivr.net/gh/cmty256/imgs-blog@main/microservice/image.1rtkq3wig334.webp)

> æ¶æ„

![image](https://cdn.jsdelivr.net/gh/cmty256/imgs-blog@main/microservice/image.2teyom70n220.webp)

* å‰ç«¯åªæœ‰é™æ€é¡µé¢ï¼Œä½¿ç”¨ Express æœåŠ¡å™¨
* åç«¯ä½¿ç”¨ Tomcat æœåŠ¡å™¨ï¼Œé€šè¿‡ SpringBootã€MyBatis ç­‰æ¡†æ¶è·å–æ•°æ®åº“æ•°æ®



#### 1) æŸ¥æ‰¾å…ƒç´ 

* document.getElementById - æ ¹æ® id å€¼æŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ 
* [document|å…ƒç´ ].querySelector - æ ¹æ®é€‰æ‹©å™¨æŸ¥æ‰¾**ç¬¬ä¸€ä¸ª**åŒ¹é…å…ƒç´ 
* [document|å…ƒç´ ].querySelectorAll - æ ¹æ®é€‰æ‹©å™¨æŸ¥æ‰¾**æ‰€æœ‰**åŒ¹é…å…ƒç´ 

ä¾‹å¦‚ï¼Œæœ‰ä¸‹é¢çš„ html ä»£ç 

```html
<div>
    <div class="title">å­¦ç”Ÿåˆ—è¡¨</div>
    <div class="thead">
        <div class="row bold">
            <div class="col">ç¼–å·</div>
            <div class="col">å§“å</div>
            <div class="col">æ€§åˆ«</div>
            <div class="col">å¹´é¾„</div>
        </div>
    </div>
    <div class="tbody">
        <div class="row">
            <div class="col">1</div>
            <div class="col">å¼ ä¸‰</div>
            <div class="col">ç”·</div>
            <div class="col">18</div>
        </div>
    </div>
</div>
```

æ‰§è¡Œ

```js
document.querySelector('.title'); // æ‰¾åˆ° <div class="title">å­¦ç”Ÿåˆ—è¡¨</div>
```

æ‰§è¡Œ

```js
document.querySelector('.col'); // æ‰¾åˆ° <div class="col">ç¼–å·</div>
```

æ‰§è¡Œ

```js
document.querySelectorAll('.col');

/*
  æ‰¾åˆ°çš„æ˜¯ä¸€ä¸ªé›†åˆ
  <div class="col">ç¼–å·</div>
  <div class="col">å§“å</div>
  <div class="col">æ€§åˆ«</div>
  <div class="col">å¹´é¾„</div>
  <div class="col">1</div>
  <div class="col">å¼ ä¸‰</div>
  <div class="col">ç”·</div>
  <div class="col">18</div>
*/
```

æ‰§è¡Œ

```js
const thead = document.querySelector('.thead');

// åªåœ¨ thead å…ƒç´ èŒƒå›´å†…æ‰¾
thead.querySelectorAll('.col');

/*
  æ‰¾åˆ°çš„æ˜¯ä¸€ä¸ªé›†åˆ
  <div class="col">ç¼–å·</div>
  <div class="col">å§“å</div>
  <div class="col">æ€§åˆ«</div>
  <div class="col">å¹´é¾„</div>
*/
```

æ ¹æ® id å±æ€§æŸ¥æ‰¾æ—¢å¯ä»¥ç”¨

```js
document.getElementById("idå€¼")
```

ä¹Ÿå¯ä»¥ç”¨ 

```js
document.querySelector("#idå€¼")
```



#### 2) ä¿®æ”¹å…ƒç´ å†…å®¹

* `å…ƒç´ .innerHTML`
* `å…ƒç´ .textContent`

ä¾‹å¦‚

```js
document.querySelector('.title').innerHTML = 'ä¾ å®¢åˆ—è¡¨'
```

æ•ˆæœ

![image](https://cdn.jsdelivr.net/gh/cmty256/imgs-blog@main/microservice/image.39d0b4gfg9o0.webp)

> `innerHTML` ä¼šè§£æå†…å®¹ä¸­çš„æ ‡ç­¾ï¼Œä¾‹å¦‚

![image](https://cdn.jsdelivr.net/gh/cmty256/imgs-blog@main/microservice/image.3x9l0u5yd1e0.webp)

> `textContext` ä¸ä¼šè§£æå†…å®¹ä¸­çš„æ ‡ç­¾

![image](https://cdn.jsdelivr.net/gh/cmty256/imgs-blog@main/microservice/image.438c0tugv0o0.webp)

ç»™ `innerHTML` æˆ– `textContent` èµ‹å€¼ç©ºä¸²ï¼Œå¯ä»¥å®ç°**æ¸…ç©ºæ ‡ç­¾å†…å®¹**çš„æ•ˆæœ



#### 3) åˆ©ç”¨æ¨¡æ¿

```html
<div>
    <div class="title">å­¦ç”Ÿåˆ—è¡¨</div>
    <div class="thead">
        <div class="row bold">
            <div class="col">ç¼–å·</div>
            <div class="col">å§“å</div>
            <div class="col">æ€§åˆ«</div>
            <div class="col">å¹´é¾„</div>
        </div>
    </div>
    <div class="tbody">
    </div>
</div>

<template id="tp">
    <div class="row">
        <div class="col">xx</div>
        <div class="col">xx</div>
        <div class="col">xx</div>
        <div class="col">xx</div>
    </div>
</template>

<script>
    // å°†æ¥è¿™äº›æ•°æ®ä» java ç«¯è¿”å›
    let array = [
        { id: 1, name: 'å¼ ä¸‰', sex: 'ç”·', age: 18 },
        { id: 2, name: 'æå››', sex: 'å¥³', age: 17 }
    ];

    const tp = document.getElementById("tp"); // è·å–æ¨¡æ¿çš„å¼•ç”¨
    const row = tp.content; // row ä»£è¡¨äº† <template> å…ƒç´ ä¸­çš„å†…å®¹
    const [c1,c2,c3,c4] = row.querySelectorAll(".col"); // è·å–æ¯ä¸ªåˆ—çš„å¼•ç”¨
    const tbody = document.querySelector('.tbody');
    for(const {id,name,sex,age} of array) {
        c1.textContent = id;
        c2.textContent = name;
        c3.textContent = sex;
        c4.textContent = age;
        // å¤åˆ¶å…ƒç´ 
        const newRow = document.importNode(row, true);
        // å»ºç«‹çˆ¶å­å…³ç³»ï¼Œå·¦è¾¹çˆ¶ï¼Œå³è¾¹å­
        tbody.appendChild(newRow); // å¯¹åº”ä¸Šé¢ tbody
    }
</script>
```



#### 4) Fetch API

Fetch API å¯ä»¥ç”¨æ¥**è·å–è¿œç¨‹æ•°æ®**ï¼Œå®ƒæœ‰ä¸¤ç§æ–¹å¼æ¥æ”¶ç»“æœï¼ŒåŒæ­¥æ–¹å¼ä¸å¼‚æ­¥æ–¹å¼

> æ ¼å¼

```js
fetch(url, options) // è¿”å› Promise
```

> åŒæ­¥æ–¹å¼ -- await

```js
const ç»“æœ = await Promise
// åç»­ä»£ç 
```

* **`await` å…³é”®å­—å¿…é¡»åœ¨ä¸€ä¸ªæ ‡è®°äº† `async` çš„ `function` å†…æ¥ä½¿ç”¨**
* åç»­ä»£ç  ä¸ä¼š åœ¨ç»“æœè¿”å›å‰ æ‰§è¡Œ

> å¼‚æ­¥æ–¹å¼ -- Promise

```js
Promise
	.then(ç»“æœ => { ... })
// åç»­ä»£ç                  
```

* åç»­ä»£ç  ä¸å¿… ç­‰å¾…ç»“æœè¿”å› å°±å¯ä»¥æ‰§è¡Œ



ä¾‹ï¼š

åœ¨ express æœåŠ¡å™¨ä¸Šæœ‰ students.json æ–‡ä»¶

```json
[
    { "id": 1, "name": "å¼ ä¸‰", "sex": "ç”·", "age": 18 },
    { "id": 2, "name": "æå››", "sex": "å¥³", "age": 17 }
]
```

ç°åœ¨ç”¨ fetch api è·å–è¿™äº›æ•°æ®ï¼Œå¹¶å±•ç¤º

åŒæ­¥æ–¹å¼

```html
<script>
    async function findStudents() {
        try {
            // è·å–å“åº”å¯¹è±¡
            const resp = await fetch('students.json')

            // è·å–å“åº”ä½“, æŒ‰jsonæ ¼å¼è½¬æ¢ä¸ºjsæ•°ç»„
            const array = await resp.json();

            // æ˜¾ç¤ºæ•°æ®
            const tp = document.getElementById("tp");
            const row = tp.content;
            const [c1,c2,c3,c4] = row.querySelectorAll(".col");
            const tbody = document.querySelector('.tbody');
            for(const {id,name,sex,age} of array) {
                c1.textContent = id;
                c2.textContent = name;
                c3.textContent = sex;
                c4.textContent = age;
                // å¤åˆ¶å…ƒç´ 
                const newRow = document.importNode(row, true);
                // å»ºç«‹çˆ¶å­å…³ç³»
                tbody.appendChild(newRow);
            }
        } catch (e) {
            console.log(e);
        }

    }
    findStudents()
</script>
```

* fetch('students.json') å†…éƒ¨ä¼šå‘é€è¯·æ±‚ï¼Œä½†å“åº”ç»“æœä¸èƒ½ç«‹åˆ»è¿”å›ï¼Œå› æ­¤ await å°±æ˜¯ç­‰å¾…å“åº”ç»“æœè¿”å›
* å…¶ä¸­ resp.json() ä¹Ÿä¸æ˜¯ç«‹åˆ»èƒ½è¿”å›ç»“æœï¼Œå®ƒè¿”å›çš„ä¹Ÿæ˜¯ Promise å¯¹è±¡ï¼Œä¹Ÿè¦é…åˆ await å–ç»“æœ

å¼‚æ­¥æ–¹å¼

```html
<script>
    fetch('students.json')
        .then( resp => resp.json() )
        .then( array => {
        	// æ˜¾ç¤ºæ•°æ®
            const tp = document.getElementById("tp");
            const row = tp.content;
            const [c1,c2,c3,c4] = row.querySelectorAll(".col");
            const tbody = document.querySelector('.tbody');
            for(const {id,name,sex,age} of array) {
                c1.textContent = id;
                c2.textContent = name;
                c3.textContent = sex;
                c4.textContent = age;
                // å¤åˆ¶å…ƒç´ 
                const newRow = document.importNode(row, true);
                // å»ºç«‹çˆ¶å­å…³ç³»
                tbody.appendChild(newRow);
            }
        })
        .catch( e => console.log(e) )


</script>
```

* ç¬¬ä¸€ä¸ª then æ˜¯åœ¨å“åº”è¿”å›åï¼Œæ‰ä¼šè°ƒç”¨å®ƒé‡Œé¢çš„ç®­å¤´å‡½æ•°ï¼Œç®­å¤´å‡½æ•°å‚æ•°å³ resp  å“åº”å¯¹è±¡
* ç¬¬äºŒä¸ª then æ˜¯åœ¨ json è§£æå®Œæˆåï¼Œæ‰ä¼šè°ƒç”¨å®ƒé‡Œé¢çš„ç®­å¤´å‡½æ•°ï¼Œç®­å¤´å‡½æ•°å‚æ•°å³è§£æç»“æœï¼ˆæœ¬ä¾‹æ˜¯ array æ•°ç»„ï¼‰
* ä¸Šä¸€ä¸ª then è¿”å›çš„æ˜¯ Promise å¯¹è±¡æ—¶ï¼Œæ‰èƒ½é“¾å¼è°ƒç”¨ä¸‹ä¸€ä¸ª then



##### è·¨åŸŸé—®é¢˜

![image](https://cdn.jsdelivr.net/gh/cmty256/imgs-blog@main/microservice/image.4ib5z67mxw20.webp)

* åªè¦åè®®ã€ä¸»æœºã€ç«¯å£ä¹‹ä¸€ä¸åŒï¼Œå°±ä¸åŒæºï¼Œä¾‹å¦‚
  * http://localhost:7070/a å’Œ https://localhost:7070/b å°±ä¸åŒæº
* **åŒæºæ£€æŸ¥æ˜¯æµè§ˆå™¨çš„è¡Œä¸º**ï¼Œè€Œä¸”åªé’ˆå¯¹ fetchã€xhr è¯·æ±‚
  * å¦‚æœæ˜¯å…¶å®ƒå®¢æˆ·ç«¯ï¼Œä¾‹å¦‚ java http clientï¼Œpostmanï¼Œå®ƒä»¬æ˜¯ä¸åšåŒæºæ£€æŸ¥çš„
  * é€šè¿‡è¡¨å•æäº¤ã€æµè§ˆå™¨ç›´æ¥è¾“å…¥ url åœ°å€è¿™äº›æ–¹å¼å‘é€çš„è¯·æ±‚ï¼Œä¹Ÿä¸ä¼šåšåŒæºæ£€æŸ¥
* æ›´å¤šç›¸å…³çŸ¥è¯†è¯·å‚è€ƒ
  * [è·¨æºèµ„æºå…±äº«ï¼ˆCORSï¼‰ - HTTP | MDN (mozilla.org)](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS)

> è¯·æ±‚å“åº”å¤´è§£å†³

![image](https://cdn.jsdelivr.net/gh/cmty256/imgs-blog@main/microservice/image.3r927vmjw7q0.webp)

* fetch è¯·æ±‚è·¨åŸŸï¼Œä¼šæºå¸¦ä¸€ä¸ª Origin å¤´ï¼Œä»£è¡¨ã€å‘è¯·æ±‚çš„èµ„æºæºè‡ªä½•å¤„ã€‘ï¼Œç›®æ ‡é€šè¿‡å®ƒå°±èƒ½è¾¨åˆ«æ˜¯å¦å‘ç”Ÿè·¨åŸŸ
  * æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼šstudent.html å‘é€ fetch è¯·æ±‚ï¼Œå‘Šè¯‰ tomcatï¼Œæˆ‘æºè‡ª localhost:7070
* ç›®æ ‡èµ„æºé€šè¿‡è¿”å› Access-Control-Allow-Origin å¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨ã€å…è®¸å“ªäº›æºä½¿ç”¨æ­¤å“åº”ã€‘
  * æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼štomcat è¿”å› fetch å“åº”ï¼Œå‘Šè¯‰æµè§ˆå™¨ï¼Œè¿™ä¸ªå“åº”å…è®¸æºè‡ª localhost:7070 çš„èµ„æºä½¿ç”¨

> ä»£ç†è§£å†³

![image-20220814161532141](D:\2022.js\imgs\image-20220814161532141.png)

```bash
npm install http-proxy-middleware --save-dev
```

åœ¨ express æœåŠ¡å™¨å¯åŠ¨ä»£ç ä¸­åŠ å…¥

```js
import {createProxyMiddleware} from 'http-proxy-middleware'

// ...

app.use('/api', createProxyMiddleware({ target: 'http://localhost:8080', changeOrigin: true }));
```

fetch ä»£ç æ”¹ä¸º

```js
const resp = await fetch('http://localhost:7070/api/students')
```

æˆ–

```js
const resp = await fetch('/api/students')
```



#### 5) æ¨¡å—åŒ–

#### export å¯¼å‡º

å•ä¸ªå¯¼å‡º constã€letã€function

```js
export const a = 10;
export let b = 20;
export function c() {
    console.log('c');
}
```

ä¸€é½å¯¼å‡º

```js
const a = 10;
let b = 20;
function c() {
    console.log('c')
}

export {a,b,c}
```

å¯¼å‡º defaultï¼Œåªèƒ½æœ‰ä¸€ä¸ª

```js
export const a = 10;
export let b = 20;
export function c() {
    console.log('c')
}

export default b;
```

#### import å¯¼å…¥

import è¯­æ³•

```html
<script type="module">
	import è¯­å¥
</script>
```

* import éœ€è¦éµå¾ªåŒæºç­–ç•¥

æ•´ä¸ªå¯¼å…¥

```js
import * as module from '/1.js'
console.log(module.a)		// è¾“å‡º10
console.log(module.b)		// è¾“å‡º20
module.c()					// è¾“å‡ºc
```

å•ä¸ªå¯¼å…¥

```js
import {a,c} from '/1.js'
console.log(a)				// è¾“å‡º10
c()							// è¾“å‡ºc
```

å¯¼å…¥é»˜è®¤

```js
import x from '/1.js'
console.log(x)				// è¾“å‡º20
```

